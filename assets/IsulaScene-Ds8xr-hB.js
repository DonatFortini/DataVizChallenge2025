import{j as e,C as I,r as a,E as w,u as F,b as g,d as S,e as M,L as y,f as z,M as d}from"./three-Dh7WEnrd.js";const C="./",L=`${C}Isula.glb`;g.preload(L);function P({children:r}){const t=a.useRef(null);return F(s=>{const o=-s.pointer.x*.6,i=-s.pointer.y*.6,u=s.pointer.x*.3;t.current&&(t.current.rotation.x=d.lerp(t.current.rotation.x,i,.12),t.current.rotation.z=d.lerp(t.current.rotation.z,o,.12),t.current.rotation.y=d.lerp(t.current.rotation.y,u,.1))}),e.jsx("group",{ref:t,children:r})}function T({url:r,playAnimation:t=!1,playOnce:s=!1,playTrigger:o,loopWithDelayMs:i}){const{scene:u,animations:v}=g(r),x=a.useMemo(()=>u.clone(!0),[u]),{actions:m,names:E,mixer:c}=S(v,x),b=a.useRef(null),l=E[0];return a.useEffect(()=>{if(!l)return;const n=m[l];if(!n)return;const f=typeof i=="number"&&i>0;let p;const j=()=>{n.reset(),n.setLoop(f||s?y:z,f||s?1:1/0),n.clampWhenFinished=!0,n.enabled=!0,n.paused=!1,n.play()};if(t){if(j(),f&&c){const h=R=>{R.action===n&&t&&(p=window.setTimeout(()=>{j()},i))};return c.addEventListener("finished",h),()=>{p!==void 0&&window.clearTimeout(p),c.removeEventListener("finished",h),n.stop()}}return()=>{n.stop()}}n.stop(),n.reset(),n.time=0},[m,i,c,t,s,o,l]),e.jsx("group",{ref:b,children:e.jsx(M,{scale:4,children:e.jsx("primitive",{object:x})})})}const U=()=>e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.5}),e.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1}),e.jsx("pointLight",{position:[-10,-10,-10]})]}),G=({playAnimation:r=!1,playOnce:t=!1,playTrigger:s,loopWithDelayMs:o})=>e.jsx("group",{position:[0,0,0],rotation:[Math.PI/2,0,0],children:e.jsx(P,{children:e.jsx(T,{url:L,playAnimation:r,playOnce:t,playTrigger:s,loopWithDelayMs:o})})});function _({playAnimation:r=!1,playOnce:t=!1,playTrigger:s,loopWithDelayMs:o}){return e.jsxs(I,{camera:{position:[0,0,5],fov:50},className:"w-full h-full",children:[e.jsx(U,{}),e.jsxs(a.Suspense,{fallback:null,children:[e.jsx(G,{playAnimation:r,playOnce:t,playTrigger:s,loopWithDelayMs:o}),e.jsx(w,{preset:"forest"})]})]})}export{_ as default};
